<script type="importmap">
  {
    "imports": {
      "vue": "https://unpkg.com/vue@3/dist/vue.esm-browser.js"
    }
  }
</script>



<script type="module">
import { createApp, ref } from 'vue'

createApp({
  setup() {
    const price1 = ref(null)
    const trend = ref('up')
    const color = ref('rgb(77, 230, 34)')
    async function fetchPrice() {
      try {
        const response1 = await fetch('https://api.exchange.coinbase.com/products/BTC-EUR/ticker')
        const result1 = await response1.json()
        price1.value = result1.price

        const response2 = await fetch('https://api.exchange.coinbase.com/products/BTC-USD/trades?limit=2')
        const result2 = await response2.json()
        if (result2[0].price > result2[1].price) {
          trend.value = 'up';
          color.value = 'rgb(77, 230, 34)'
        }
        else if (result2[0].price < result2[1].price) {
          trend.value = 'down';
          color.value = 'rgb(216, 16, 16)'
        }
        else if (result2[0].price == result2[1].price) {
          trend.value = trend.value
          color.value = color.value
        }

        console.log(price1.value)
        console.log(trend.value)
      } catch (error) {
        console.error('Error fetching data:', error)
      }
    }
    
    setInterval(fetchPrice, 1000);

    fetchPrice()
    return { price1, trend, color }
  }
}).mount('#app')
</script>

<head>
    <meta charset="UTF-8">
    <link rel="icon" href="./pictures/icon_site.png">
    <title>Finankox</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined">
</head>

<nav class="nav_bar"><h1>Finankox</h1></nav>
<div class="jumped"></div>

<div id="app">
    <p v-if="price1" class="price">1 BTC = {{ price1 }} â‚¬ 
      <span v-if="trend" class="material-symbols-outlined" :class="trend" :style="{ color: color }">
        {{ trend === 'up' ? 'arrow_drop_up' : trend === 'down' ? 'arrow_drop_down' : 'check_indeterminate_small' }}
      </span>
    </p>
</div>

<style>
  .price{
    font-size: 300%;
    text-align: center;
    font-weight: bold;
  }
  .material-symbols-outlined {
    font-size: 120%;
  }
  .jumped{
    height: 8%;
  }
  .nav_bar{
    height: 6vw;
    background-color: black;
    color: white;
    border-radius: 0px 0px 20px 20px;
  }
  h1{
    font-size: 250%;
    padding: 1%;
    text-align: center;
  }
</style>