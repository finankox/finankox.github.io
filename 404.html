<script type="importmap">
  {
    "imports": {
      "navigo": "https://unpkg.com/navigo@8.11.1/lib/navigo.min.js"
    }
  }
</script>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="./pictures/icon_site.png">
    <title>Finankox</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined">
    <link rel="stylesheet" href="index.css">
</head>


<div class="jumped"></div>

<div class="price">There is nothing here ...</div>

<!--<script src="router.js"></script>-->
<script>
;(function() {
  const app = document.getElementById('appli');
  const router = new Navigo('/', { hash: false });

  // Charge un fragment HTML et injecte le terme, si présent
  function render(fragment, term = '') {
    fetch(fragment)
      .then(res => res.text())
      .then(html => {
        app.innerHTML = html;
        // Injecte le mot-clé recherché
        app.querySelectorAll('[data-search-term]').forEach(el => {
          el.textContent = decodeURIComponent(term);
        });
      });
  }

  router
    .on('/', () => render('home.html'))
    .on('/about', () => render('about.html'))
    .on('/search', () => render('search.html'))

    .on('/searched/:term+', ({ data }) => render('indeed.html', data.term))
    .notFound(() => render('404.html', window.location.pathname))
    .resolve();

  // Réactive le router sur les liens internes
  document.body.addEventListener('click', e => {
    if (e.target.matches('[data-navigo]')) {
      e.preventDefault();
      router.navigate(e.target.getAttribute('href'));
    }
  });
})();
</script>
</html>